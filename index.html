const parcours = { MAISON: [ { q: "1. Prix Net Vendeur (‚Ç¨) ?", cle: "prix" }, {
q: "2. Honoraires d'agence (‚Ç¨) ?", cle: "honoraires" }, { q: "3. Surface
habitable (m2) ?", cle: "surface" }, { q: "4. DPE (A √† G) ?", cle: "dpe" }, { q:
"5. Taxe Fonci√®re (‚Ç¨) ?", cle: "taxe" }, { q: "6. Mode de chauffage ?", cle:
"chauffage" }, { q: "7. √âtat Toiture/Isolation ?", cle: "technique" }, { q: "8.
Adresse pr√©cise ?", cle: "adresse" }, { q: "9. Assainissement ?", cle: "reseaux"
}, { q: "10. Potentiel d'extension ?", cle: "potentiel" }, ], APPARTEMENT: [ {
q: "1. Prix Net Vendeur (‚Ç¨) ?", cle: "prix" }, { q: "2. Honoraires d'agence (‚Ç¨)
?", cle: "honoraires" }, { q: "3. Surface Loi Carrez (m2) ?", cle: "surface" },
{ q: "4. DPE (A √† G) ?", cle: "dpe" }, { q: "5. Taxe Fonci√®re (‚Ç¨) ?", cle:
"taxe" }, { q: "6. Charges annuelles (‚Ç¨) ?", cle: "charges" }, { q: "7. √âtat des
parties communes ?", cle: "technique" }, { q: "8. Adresse et √©tage ?", cle:
"adresse" }, { q: "9. Cave / Parking ?", cle: "annexes" }, { q: "10. Travaux de
copro vot√©s ?", cle: "potentiel" }, ], IMMEUBLE: [ { q: "1. Prix Net Vendeur (‚Ç¨)
?", cle: "prix" }, { q: "2. Honoraires (‚Ç¨) ?", cle: "honoraires" }, { q: "3.
Nombre de lots ?", cle: "lots" }, { q: "4. Loyers annuels HC (‚Ç¨) ?", cle:
"loyer" }, { q: "5. Taxe Fonci√®re (‚Ç¨) ?", cle: "taxe" }, { q: "6. √âtat des
compteurs ?", cle: "reseaux" }, { q: "7. √âtat du Gros ≈íuvre ?", cle: "technique"
}, { q: "8. Adresse ?", cle: "adresse" }, { q: "9. Chauffage (Indiv/Coll) ?",
cle: "chauffage" }, { q: "10. Potentiel de division ?", cle: "potentiel" }, ],
TERRAIN: [ { q: "1. Prix Net Vendeur (‚Ç¨) ?", cle: "prix" }, { q: "2. Honoraires
(‚Ç¨) ?", cle: "honoraires" }, { q: "3. Surface cadastrale (m2) ?", cle: "surface"
}, { q: "4. Zone au PLU ?", cle: "plu" }, { q: "5. Taxes d'am√©nagement (‚Ç¨) ?",
cle: "taxe" }, { q: "6. √âtude G1/G2 faite ?", cle: "dpe" }, { q: "7.
Viabilisation ?", cle: "technique" }, { q: "8. Adresse ?", cle: "adresse" }, {
q: "9. Libre de constructeur ?", cle: "reseaux" }, { q: "10. Emprise au sol
(CES) ?", cle: "potentiel" }, ], COMMERCE: [ { q: "1. Prix (‚Ç¨) ?", cle: "prix"
}, { q: "2. Honoraires (‚Ç¨) ?", cle: "honoraires" }, { q: "3. Surface commerciale
(m2) ?", cle: "surface" }, { q: "4. Type de bail ?", cle: "bail" }, { q: "5.
Taxe Fonci√®re ?", cle: "taxe" }, { q: "6. Loyer annuel (‚Ç¨) ?", cle: "loyer" }, {
q: "7. √âtat technique ?", cle: "technique" }, { q: "8. Adresse ?", cle:
"adresse" }, { q: "9. Charges copro ?", cle: "charges" }, { q: "10. Droit au
bail ?", cle: "potentiel" }, ], PARKING: [ { q: "1. Prix (‚Ç¨) ?", cle: "prix" },
{ q: "2. Honoraires (‚Ç¨) ?", cle: "honoraires" }, { q: "3. Nombre de places ?",
cle: "lots" }, { q: "4. Loyer mensuel moyen (‚Ç¨) ?", cle: "loyer" }, { q: "5.
Taxe Fonci√®re (‚Ç¨) ?", cle: "taxe" }, { q: "6. Charges annuelles (‚Ç¨) ?", cle:
"charges" }, { q: "7. S√©curisation ?", cle: "technique" }, { q: "8. Adresse ?",
cle: "adresse" }, { q: "9. Dimensions ?", cle: "surface" }, { q: "10. Bornes
√©lectriques ?", cle: "potentiel" }, ], }; let typeBien = null, index = 0,
reponses = {}; function ajouterMessage(texte, auteur) { const box =
document.getElementById("chat-box"); const div = document.createElement("div");
div.className = `msg ${auteur}`; div.innerHTML = texte; box.appendChild(div);
box.scrollTop = box.scrollHeight; } function traiterSaisie() { const input =
document.getElementById("user-input"); const texte = input.value.trim(); if
(texte === "") return; ajouterMessage(texte, "user"); input.value = ""; if
(!typeBien) { const choix = texte.toUpperCase(); if (parcours[choix]) { typeBien
= choix; setTimeout(() => { ajouterMessage(`Analyse technique lanc√©e :
<strong>${typeBien}</strong>.`, "bot"); setTimeout(() =>
ajouterMessage(parcours[typeBien][0].q, "bot"), 600); }, 400); } else {
ajouterMessage("Veuillez saisir : MAISON, APPARTEMENT, IMMEUBLE, TERRAIN,
COMMERCE ou PARKING.", "bot"); } } else { const qActuelles = parcours[typeBien];
reponses[qActuelles[index].cle] = texte; index++; if (index < qActuelles.length)
{ setTimeout(() => ajouterMessage(qActuelles[index].q, "bot"), 500); } else {
finaliser(); } } } function finaliser() { const p = parseFloat(reponses.prix) ||
0; const h = parseFloat(reponses.honoraires) || 0; const totalAcquisition = p +
h; const surface = parseFloat(reponses.surface) || 0; const loyer =
parseFloat(reponses.loyer) || 0; const taxe = parseFloat(reponses.taxe) || 0;
const dpe = reponses.dpe ? reponses.dpe.toUpperCase() : "N/A"; let
indicateursHtml = ""; let scoreLiquidite = 6; if (surface > 0) { const prixM2 =
(p / surface).toFixed(2); indicateursHtml += `
<p><strong>üìä Valeur :</strong> ${prixM2} ‚Ç¨/m¬≤</p>
`; } if (["A", "B"].includes(dpe)) scoreLiquidite += 2; if (["F",
"G"].includes(dpe)) scoreLiquidite -= 3; if (loyer > 0) { const loyerAnnuel =
(typeBien === "PARKING") ? loyer * 12 : loyer; const rendementBrut =
((loyerAnnuel / totalAcquisition) * 100).toFixed(2); const rendementNet =
(((loyerAnnuel - taxe) / totalAcquisition) * 100).toFixed(2); indicateursHtml +=
`
<p style="color: #27ae60">
  <strong>üìà Rendement Brut :</strong> ${rendementBrut}%
</p>
<p style="color: #2ecc71">
  <strong>üí∞ Rendement Net :</strong> ${rendementNet}%
</p>
`; if (parseFloat(rendementBrut) > 8) scoreLiquidite += 1; } const rapport = `
<div
  style="
    background: #ffffff;
    border: 2px solid #2c3e50;
    border-radius: 12px;
    padding: 20px;
    margin-top: 15px;
    text-align: left;
    color: #2c3e50;
  "
>
  <h3
    style="
      margin-top: 0;
      border-bottom: 2px solid #3498db;
      padding-bottom: 10px;
    "
  >
    RealData Immo : Expertise ${typeBien}
  </h3>
  <div
    style="
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin-top: 10px;
    "
  >
    <div>
      <p><strong>üìç Localisation :</strong><br />${reponses.adresse}</p>
      <p>
        <strong>üí∞ Acquisition :</strong
        ><br />${totalAcquisition.toLocaleString()} ‚Ç¨
      </p>
    </div>
    <div>
      ${indicateursHtml}
      <p><strong>‚ö° DPE :</strong> ${dpe}</p>
    </div>
  </div>
  <div
    style="
      background: #f8f9fa;
      border-left: 4px solid #3498db;
      padding: 10px;
      margin-top: 15px;
      font-style: italic;
    "
  >
    Note technique : ${reponses.technique}
  </div>
  <div
    style="
      margin-top: 20px;
      background: #2c3e50;
      color: white;
      padding: 12px;
      border-radius: 8px;
      text-align: center;
      font-weight: bold;
    "
  >
    SCORE DE LIQUIDIT√â : ${Math.max(0, Math.min(10, scoreLiquidite))}/10
  </div>
</div>
`; document.getElementById("input-area").style.display = "none";
document.getElementById("btn-reset").style.display = "block";
ajouterMessage("Analyse technique termin√©e. Voici ton rapport RealData Immo :",
"bot"); setTimeout(() => ajouterMessage(rapport, "bot"), 800); }
document.addEventListener("DOMContentLoaded", () => {
document.getElementById("btn-valider").onclick = traiterSaisie;
document.getElementById("user-input").onkeypress = (e) => { if (e.key ===
"Enter") traiterSaisie(); }; setTimeout(() => { ajouterMessage("Bienvenue dans
l'assistant <strong>RealData Immo</strong>. Choisissez la cat√©gorie :
<strong>MAISON, APPARTEMENT, IMMEUBLE, TERRAIN, COMMERCE, PARKING</strong>",
"bot"); }, 600); });
